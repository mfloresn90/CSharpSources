<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head><link rel="stylesheet" type="text/css" href="description/Combined.css,0:sprite;/Areas/Epx/Themes/Windows/Content:0&amp;amp;hashKey=15EDE1F25211E852032D2691D5FEB7B8" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="description/9d0720cf-bf50-484c-bf6c-77cf57a10f7cCombined.css,0:sprite,1:LinkList;/Areas/Epx/Themes/Windows/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;hashKey=52ADCBE5376E50AE6798D3D038D063E9" xmlns="http://www.w3.org/1999/xhtml" />

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Alarm toast notifications sample</title>
        <link href="description/Galleries.css" type="text/css" rel="Stylesheet" /><link href="description/Layout.css" type="text/css" rel="Stylesheet" /><link href="description/Brand.css" type="text/css" rel="Stylesheet" /><link href="description/f1d4cd5b-ee0e-41ab-9a4f-a8fc36768c28Brand.css" type="text/css" rel="Stylesheet" />
        <link href="description/iframedescription.css" rel="Stylesheet" type="text/css" />
        <script src="description/offline.js" type="text/javascript"></script>
        <style type="text/css">
            #projectInfo {
                overflow: auto;
            }
            #longDesc {
                clear:both;
                margin: 25px 0 10px 0;
            }

            #SampleIndexList{
                margin-left: 15px;
            }
        </style>
    </head>
<body>
    <div id="offlineDescription">
        <h1>Alarm toast notifications sample</h1>
        <br/>
        <div id="projectInfo">
            <div class="section">
                    <div class="itemBarLong tagsContainer">
                        <label for="Technologies">Technologies</label>
                        <div id="Technologies">
                            Windows Runtime
                        </div>
                    </div>
                    <div class="itemBarLong tagsContainer">
                        <label for="Topics">Topics</label>
                        <div id="Topics">
                            toast notifications, alarm apps
                        </div>
                    </div>
                <div class="itemBarLong">
                    <label for="Platforms">Platforms</label>
                    <div id="Platforms">
                        Windows RT
                    </div>
                </div>
                <div class="itemBarLong">
                    <label for="Requirements">Requirements</label>
                    <div id="Requirements">
                        
                    </div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Primary language</label>
                    <div id="LastUpdated">en-US</div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Updated</label>
                    <div id="LastUpdated">11/25/2013</div>
                </div>
                <div class="itemBarLong">
                    <label for="License">License</label>
                    <div id="License">
                        <a href="license.rtf">MS-LPL</a></div>
                </div>
                <div class="itemBar">
                    <div class="viewonlinecont">
                        <a data-link="online" href="http://code.msdn.microsoft.com/windowsapps/Alarm-toast-notifications-fe81fc74">View this sample online</a>
                    </div>
                </div>
            </div>
        </div>
        
                   
<script type="text/javascript">
    function initializePage() {
        var otherTabClass = 'otherTab';
        var hiddenPreClass = 'hidden';

        var htmlDecode = function(encodedData) {
            var decodedData = "";
            if (encodedData) {
                var div = document.createElement('div');
                div.innerHTML = encodedData;
                decodedData = div.firstChild.nodeValue.replace( /\\r\\n/ig , '\r\n');
            }
            return decodedData;
        };
                
        Galleries.iterateElem(Galleries.findElem(null, 'div', 'scriptcode'), function (index, scriptBlock) {
            var titleElem = Galleries.findElem(scriptBlock, 'div', 'title')[0];
            var labelElems = Galleries.findElem(titleElem, 'span');
            if (labelElems.length == 0) {
                labelElems = titleElem;
            }
            var languageSpans = Galleries.findElem(scriptBlock, 'span', 'hidden');
            var pres = Galleries.findElem(scriptBlock, 'pre');
            if (languageSpans.length > 0 && pres.length > 1) {
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    var languageSpan = languageSpans[index];
                            
                    elem.code = codePre.innerHTML.replace( /(\r(\n)?)|((\r)?\n)/ig , '\\r\\n');
                            
                    codePre.className = codePre.className.replace(hiddenPreClass, '');
                            
                    languageSpan.parentNode.removeChild(languageSpan);
                });

                pres = Galleries.findElem(scriptBlock, 'pre');
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    if (index == 0) {
                        scriptBlock.activeTab = 0;
                    }
                    else {
                        labelSpan.className += otherTabClass;
                        codePre.className += hiddenPreClass;
                    }
                    Galleries.attachEventHandler(labelSpan, 'click', function(e) {
                        var activeTab = scriptBlock.activeTab;
                        labelElems[activeTab].className += otherTabClass;
                        pres[activeTab].className += hiddenPreClass;

                        codePre.className = codePre.className.replace(hiddenPreClass, '');
                        labelSpan.className = labelSpan.className.replace(otherTabClass, '');
                        scriptBlock.activeTab = index;
                    });
                });

                var preview = Galleries.findElem(scriptBlock, 'div', 'preview');
                if (preview.length == 0) {
                    preview.push(pres[pres.length - 1]);
                }
                Galleries.iterateElem(preview, function(index, elem) {
                    elem.parentNode.removeChild(elem);
                });

                if (window.clipboardData && clipboardData.setData) {
                    var copyLink = document.createElement('a');
                    copyLink.href = 'javascript:void(0);';
                    copyLink.className = 'copyCode';
                    copyLink.innerHTML = 'Copy code';
                    Galleries.attachEventHandler(copyLink, 'click', function (e) {
                        clipboardData.setData("Text", htmlDecode(labelElems[scriptBlock.activeTab].code));
                        return false;
                    });
                    scriptBlock.insertBefore(copyLink, scriptBlock.childNodes[0]);
                }
            }
        });
    }

    Galleries.onWindowLoad(function(){
        initializePage();
    });

</script>
<div id="longDesc">
    
<div id="mainSection">
<p>This code sample demonstrates how to raise an alarm toast notification that includes
<b>Snooze</b> and <b>Dismiss</b> buttons. Alarm toasts are available as of Windows&nbsp;8.1.</p>
<p>One <a href="http://msdn.microsoft.com/library/windows/apps/hh700416">lock screen app</a> can be designated by the user as the system alarm app, either through PC Settings or by accepting a permissions dialog. Once a lock screen app is designated as the
 system alarm app, it can schedule alarm notifications that are shown to the user within an accuracy of one second.</p>
<p>This sample demonstrates the following functionality for alarm apps: </p>
<ul>
<li>Raising an alarm toast notification </li><li>Setting a custom snooze duration for an alarm toast </li></ul>
<p></p>
<p>For general toast notification sample code, see the <a href="http://msdn.microsoft.com/library/windows/apps/">
Toast notifications sample</a>.</p>
<p>An app that has a lock screen presence must declare one or more of the following types of background tasks:</p>
<ul>
<li>Control channel </li><li>Timer </li><li>Push notification </li></ul>
<p>In the Microsoft Visual Studio manifest editor, this background task value is set in the
<b>Declarations</b> tab. This sets the <b>BackgroundTasks</b> element in the <code>
package.appxmanifest</code> file. The background task typically runs periodically to schedule new alarms, recurring alarms, or both. This sample uses a placeholder background task that is never scheduled.</p>
<p>To obtain an evaluation copy of Windows&nbsp;8.1, go to <a href="http://go.microsoft.com/fwlink/p/?linkid=301696">
Windows&nbsp;8.1</a>.</p>
<p>To obtain an evaluation copy of Microsoft Visual Studio&nbsp;2013, go to <a href="http://go.microsoft.com/fwlink/p/?linkid=301697">
Visual Studio&nbsp;2013</a>.</p>
<p class="note"><b>Note</b>&nbsp;&nbsp;For Windows&nbsp;8 app samples, download the <a href="http://go.microsoft.com/fwlink/p/?LinkId=301698">
Windows&nbsp;8 app samples pack</a>. The samples in the Windows&nbsp;8 app samples pack will build and run only on Microsoft Visual Studio&nbsp;2012.</p>
<h2><a id="related_topics"></a>Related topics</h2>
<dl><dt><a href="m_dev_guide.ux_ui#alarms">New API for alarm apps</a> </dt><dt><a href="http://msdn.microsoft.com/library/windows/apps/dn268318"><b>Toast schema commands element</b></a>
</dt><dt><a href="http://msdn.microsoft.com/library/windows/apps/dn297281"><b>AlarmApplicationManager</b></a>
</dt><dt><a href="http://msdn.microsoft.com/library/windows/apps/">Toast notifications sample</a>
</dt><dt><a href="http://msdn.microsoft.com/library/windows/apps/">Lock screen apps sample</a>
</dt><dt><a href="http://go.microsoft.com/fwlink/p/?LinkID=227694">Windows app samples</a>
</dt></dl>
<h2>Operating system requirements</h2>
<table>
<tbody>
<tr>
<th>Client</th>
<td><dt>Windows&nbsp;8.1 </dt></td>
</tr>
<tr>
<th>Server</th>
<td><dt>Windows Server&nbsp;2012&nbsp;R2 </dt></td>
</tr>
</tbody>
</table>
<h2>Build the sample</h2>
<ol>
<li>Download the sample's .zip file using one of the buttons near the top of the page.
</li><li>Unzip the downloaded file into a folder on your computer. </li><li>Start Visual Studio&nbsp;2013 and select <b>File</b> &gt; <b>Open</b> &gt; <b>Project/Solution</b>.
</li><li>Go to the folder where you unzipped the sample. </li><li>Find and open the folder named for the sample and one of its programming language subfolders (C#, JS.
</li><li>Double-click the Visual Studio Solution (.sln) file to open it. </li><li>Use <b>Build</b> &gt; <b>Build Solution</b> to build the sample. </li></ol>
<h2>Run the sample</h2>
<p>To debug the app and then run it, press F5 or use <b>Debug</b> &gt; <b>Start Debugging</b>. To run the app without debugging, press Ctrl&#43;F5 or use
<b>Debug</b> &gt; <b>Start Without Debugging</b>.</p>
<p>The first time (and only the first time) that you run the app, you will be shown a dialog that asks &quot;Replace your current alarm app with this one?&quot; To see the alarm on the lock screen, or to see it elsewhere with its snooze and dismiss buttons, you should
 select &quot;Yes&quot;. If you do not, you can replace the current alarm app with the sample app manually later through PC Settings. The only way to see the original dialog again is to uninstall and reinstall the app.</p>
<p>To use the sample:</p>
<ol>
<li>Select a delay time to specify the amount of time before the alarm appears. This must be between 1 and 60 minutes (inclusive).
</li><li>Either click the <b>Default Snooze</b> button to use the default snooze time of approximately 9 minutes or set a snooze time and set the
<b>Custom Snooze</b> button. </li><li>Wait for the alarm to appear or lock your computer (for instance by pressing Windows logo key &#43; L) to take you to the lock screen to see the alarm there.
</li><li>When the alarm appears, you can take these actions:
<ul>
<li>Select snooze. The alarm will reappear after the specified or default time. </li><li>Select dismiss. </li><li>Do nothing and the toast will dismiss itself after a time </li></ul>
</li></ol>
<p>If the alarm does not appear on the lock screen, go to PC Settings to ensure that the alarm notification sample is set as the alarm app.</p>
<p>Note that if you do not set the alarm notification app as the system alarm app, you can still see the alarm everywhere except the lock screen. However, it will not have the snooze or dismiss buttons. In that case, you have these options:</p>
<ul>
<li>Click or touch the toast body to launch the app. </li><li>Click the X (visible on mouse-over) or swipe the toast to dismiss it </li><li>Do nothing and the toast will dismiss itself after a time </li></ul>
</div>

</div>


    </div>
</body>
</html>
